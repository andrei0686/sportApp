# Функциональные предствление

![diagrams](diagrams/functions.svg)

## Администрирование и аналитика
Используются роли Аналитик, Маркетолог, Администратор.

Аналитик формирует отчеты на основе данных пользователей.

Маркетолог может формировать маркетинговые компании с основными сущностями Кампания, Целевая аудитория, Отчет об эффективности.

Администратор занимается модерацией контента, при появлении жалобы проводит проверку и принимает решение на блокировку или удаление аккаунта.

Администратор проводит обновление функционала системы который был разработан на основе обратной связи от пользователей и аналитики.

## События и турниры
Этот модуль позволяет федерациям, спортивным организациям, тренерам и даже самим пользователям создавать, продвигать и управлять спортивными событиями, от локальных забегов до крупных онлайн-турниров.
### Ключевые сущности (Entities)
Event (Событие): Основная сущность. Содержит все данные о событии.

Organizer (Организатор): Может быть Federaltion, Trainer или User (для пользовательских мероприятий).

Registration (Регистрация): Связывает User и Event, хранит статус, дополнительные данные, результат.

Event Category/Tag (Категория/Тег): Для классификации событий.

Leaderboard Entry (Запись в таблице лидеров): Связывает Registration с результатом (время, очки, место).
### функциональные блоки  
#### Создание и управление событиями (Event Creation & Management)
Назначение: Центр управления для организаторов (федераций, тренеров).

Функции:

CRUD для событий: Создание, просмотр, редактирование, удаление/архивация события.

Расширенная форма создания:

Основные данные: Название, описание, обложка, тип события (турнир, марафон, воркшоп, онлайн-заезд и т.д.).

Детали: Дата и время (начало, окончание, регистрации), местоположение (с картой, адресом) или отметка Онлайн.

Условия участия: Целевая аудитория (пол, возрастные группы, уровень подготовки), требования (наличие медицинской справки, специальный инвентарь).

Регламент: Правила, система начисления очков, критерии победы.

Программа: Расписание этапов/активностей в рамках события.

Призы и награды: Описание призового фонда, наград.

Статусы события: Черновик, Опубликовано, Регистрация открыта, Идет, Завершено, Отменено.

Управление видимостью: Публичное событие или по ссылке (приватное).

####  Каталог и discovery событий (Event Discovery)
Назначение: Помочь пользователям найти интересующие их события.

Функции:

Каталог событий: Список всех активных событий с фильтрами и сортировкой (по дате, популярности, типу, местоположению, онлайн/офлайн).

Поиск: По названию, описанию, организатору.

Рекомендации: Система предлагает события на основе интересов пользователя, его местоположения и прошлой активности.

Категории и теги: Структуризация событий (например, "Бег", "Йога", "Для начинающих", "Челлендж").

Лента/анонсы: Закрепленные или рекомендованные события на главной странице.

####  Процесс регистрации (Registration Engine)
Назначение: Обеспечить smooth процесс записи пользователя на событие.

Функции:

Регистрация: Пользователь нажимает "Участвовать", система проверяет соответствие требованиям.

Сбор дополнительных данных: Форма для заполнения необходимой информации (никнейм для турнира, весовая категория, размер футболки, номер телефона для экстренной связи).

Загрузка документов: Возможность загрузить скан медицинской справки или иного требуемого документа (для проверки организатором).

Платные события: Интеграция с платежным шлюзом для оплаты взноса. Выдача электронного билета.

Лист ожидания: Автоматическое включение в лист ожидания, если достигнут лимит участников, с уведомлением о наличии свободного места.

####  Управление участниками (Participant Management)
Назначение: Инструменты для организатора по работе с заявками.

Функции:

Панель управления событием: Просмотр списка всех участников, их статусов (зарегистрирован, оплатил, подтвержден, завершил).

Верификация заявок: Ручное подтверждение участников, проверка загруженных документов.

Ручное управление: Добавление/удаление участников, изменение их статуса (например, снятие с турнира).

Экспорт списка: Выгрузка данных участников (имена, контакты) в CSV/Excel.

####  Коммуникация и уведомления (Communication & Notifications)
Назначение: Информирование участников и организатора.

Функции:

Центр уведомлений для события:

Организатору: Уведомления о новых заявках, вопросах от участников.

Участникам: Автоматические уведомления (push, email) о старте регистрации, подтверждении заявки, напоминание о начале события, изменениях в программе, результатах.

Встроенный чат/форум события: Место для общения участников между собой и с организатором, задавания вопросов.

####  Проведение и отслеживание результатов (Event Execution & Results)
Назначение: Финальная стадия — проведение события и подведение итогов.

Функции:

Для онлайн-событий: Интеграция с модулем онлайн-тренировок для проведения трансляции.

Трекинг результатов:

Автоматический: Для событий, связанных с активностями в приложении (например, забег с трекингом через GPS). Результаты (время, дистанция) автоматически загружаются в таблицу лидеров.

Ручной: Организатор вручную вводит или загружает итоговые результаты (например, по итогам судейства).

Таблица лидеров (Leaderboard): Динамическое отображение результатов участников в реальном времени или после завершения.

Подведение итогов: Объявление победителей, размещение финальных результатов и фотографий с события.

#### Профиль пользователя и история (User Profile Integration)
Назначение: Отображение активности пользователя в событиях.

Функции:

Вкладка "Мои события": В профиле пользователя отображаются: "Предстоящие", "Текущие", "Завершенные" события.

Аchievements: Награды и значки, полученные за участие и победы в событиях, добавляются в коллекцию пользователя.

История: Для завершенных событий отображаются результат пользователя (его место, время и т.д.) и ссылка на общие итоги.

## Питание и здоровье
Включает сущности Дневник питания, Продукт, Рецепт, Рекомендация по питанию.

Может создаваться как Тренером, так и пользователем.

## Аккаунт и данные
Этот модуль отвечает за идентификацию пользователя, управление его профилем, безопасность доступа и централизованное хранение всех персональных данных, которые используются другими модулями системы.

### Функциональные блоки (подмодули)
### 1.1. Аутентификация (Authentication)
Назначение: Убедиться, что пользователь тот, за кого себя выдает.

Функции:

Классическая регистрация по email/паролю: Валидация email, проверка сложности пароля, хеширование пароля (bcrypt).

OAuth 2.0 авторизация: Интеграция с провайдерами (Google, Apple, VK, Yandex, Facebook). Получение и обработка данных профиля.

Вход (Login): Проверка учетных данных, создание сессии.

Выход (Logout): Завершение сессии на стороне сервера.

Восстановление доступа: Процедура "Забыли пароль?" через отправку ссылки на email.

### 1.2. Верификация и безопасность (Verification & Security)
Назначение: Повышение уровня доверия и безопасности аккаунта.

Функции:

Подтверждение email: Отправка welcome-письма со ссылкой для подтверждения.

Верификация номера телефона (SMS):

Отправка одноразового кода (OTP) через SMS-шлюз (например, SMS.ru, Twilio).

Проверка введенного кода.

Логика повторной отправки кода (с задержкой для предотвращения спама).

Управление сессиями: Просмотр активных устройств/сессий, возможность удалить конкретную сессию.

Двухфакторная аутентификация (2FA): (Опционально) Настройка через TOTP-приложение (Google Authenticator).

### 1.3. Управление профилем (Profile Management)
Назначение: Централизованное хранение и управление персональными данными пользователя.

Функции:

CRUD основных данных: Имя, фамилия, никнейм, пол, дата рождения, город, часовой пояс, "О себе".

Управление аватаром: Загрузка, обрезка, удаление фотографии профиля.

Спортивный профиль:

Антропометрия: Рост, вес, ИМТ (авторасчет).

Цели: Цель тренировок (похудение, набор массы, поддержание формы, подготовка к мероприятию).

Уровень подготовки: Начинающий, любитель, профессионал.

Интересы и предпочтения: Любимые виды активности (бег, йога, плавание) для персонализации ленты и рекомендаций.

Медицинские противопоказания/травмы: Важная информация для формирования безопасных тренировочных планов.

### 1.4. Интеграция с носимими устройствами и API (Wearables & API Integration)
Назначение: Автоматический сбор данных о физической активности для более точного анализа.

Функции:

Поддержка основных провайдеров: Интеграция с Apple HealthKit, Google Fit, Strava, Garmin, Fitbit.

Процесс подключения: OAuth-аутентификация на стороне провайдера, запрос разрешений на доступ к данным.

Синхронизация данных: Фоновая периодическая или ручная выгрузка данных:

Типы данных: Шаги, дистанция, калории, пульс (в состоянии покоя и во время активности), сон, вес.

Управление подключениями: Просмотр подключенных сервисов, отзыв доступа.

### 1.5. Управление данными и конфиденциальность (Data & Privacy)
Назначение: Соответствие GDPR и другим регуляториям, предоставление пользователям контроля над их данными.

Функции:

Экспорт данных: Возможность запроса и скачивания архива со всеми персональными данми в машиночитаемом формате (JSON, CSV).

Удаление аккаунта: Функция полного "права на забвение". Все данные пользователя анонимизируются или полностью удаляются из системы.

Настройки конфиденциальности: Управление видимостью профиля (публичный/приватный), активности, результатов.

### 1.6. Система уведомлений (Preferences & Notifications)
Назначение: Центр управления уведомлениями, чтобы пользователь получал только релевантную информацию.

Функции:

Каналы уведомлений: Push-уведомления, Email, SMS.

Гибкие настройки: Возможность включить/отключить уведомления для разных событий:

Новые сообщения от тренера.

Напоминания о тренировках.

Комментарии в сообществах.

Рекламные рассылки и новости.

Уведомления о мероприятиях.

### Ключевые сущности (Entities)
User (Пользователь): Основная сущность. Хранит логин, хеш пароля, статус аккаунта (active, pending, blocked).

Profile (Профиль): Связана с User. Содержит все персональные, спортивные и настройки данные.

AuthSession (Сессия): Хранит токены (JWT или иные) для управления сессиями.

OAuthConnection (OAuth-подключение): Хранит идентификатор пользователя у стороннего провайдера (например, google_id) и токен доступа.

Device (Устройство): Информация об устройстве (модель, OS) для управления push-токенами и сессиями.

UserMetric (Метрика пользователя): Исторические данные антропометрии (вес, рост) и здоровья (пульс покоя), привязанные к дате для построения графиков.


## тренер и услуги
### Управление расписанием тренера
Тренер создает Слот, указывает Формат
### Проведение онлайн-тренировки
Тренер запускает Трансляцию, привязанную к Слоту. 
Пользователи присоединяются, используется Чат. 
Факт проведения фиксируется как завершенная Тренировка.
### Верификация тренера
Заявка на верификацию с прикрепленными Документами. 
Федерация меняет Статус верификации тренера.

### Запись тренировки
Ручной ввод или импорт данных (API Google Fit, Apple HealthKit).

## Тренер и услуги
Этот модуль предоставляет тренерам и спортивным экспертам инструменты для ведения клиентской базы, создания и продажи услуг, а пользователям — удобный способ найти эксперта и получить персональное руководство.
### Функциональные блоки (подмодули)
### 1.1. Статус тренера и верификация (Coach Profile & Verification)
Назначение: Отделить сертифицированных специалистов от обычных пользователей и повысить доверие.

Функции:

Заявка на получение статуса "Тренер": Пользователь подает заявку в своем профиле.

Загрузка подтверждающих документов: Сертификаты, дипломы, портфолио, страховка.

Модерация со стороны федерации/администрации: Проверка документов, одобрение или отклонение заявки с указанием причины.

Публичный профиль тренера: Отдельная страница с био, специализацией, регалиями, отзывами, рейтингом и статусом верификации ("Проверен Федерацией").

Поиск и каталог тренеров: Фильтры по специализации (силовые, бег, йога), рейтингу, цене, формату (онлайн/офлайн).

### 1.2. Управление расписанием (Schedule Management)
Назначение: Позволить тренеру эффективно управлять своим временем, а клиентам — легко записываться.

Функции:

"Календарь" тренера: Инструмент для визуального планирования.

Создание слотов: Тренер указывает доступные интервалы времени для занятий.

Настройка типа сессии: Для каждого слота можно указать:

Формат: Индивидуальная тренировка, групповая (с указанием макс. количества человек), онлайн-трансляция.

Продолжительность (30/60/90 мин).

Стоимость (за занятие или пакет).

Местоположение (спортивный зал, Zoom-ссылка, адрес).

Автоматическое блокирование времени: После записи клиента слот помечается как "занят".

Интеграция с календарями: Синхронизация с Google Calendar/Apple Calendar.

### 1.3. Система бронирования и оплаты (Booking & Payment System)
Назначение: Автоматизировать процесс продажи услуг.

Функции:

Просмотр доступных слотов: Клиент видит в профиле тренера его свободное время.

Процесс записи: Выбор слота, подтверждение, оплата.

Интеграция с платежными шлюзами (Stripe, ЮKassa, Tinkoff): Безопасное проведение платежей.

Управление бронированиями:

Для тренера: Просмотр всех предстоящих и завершенных сессий.

Для клиента: Просмотр своих записей в личном кабинете.

Уведомления: Напоминание тренеру и клиенту о предстоящей тренировке (за 24 часа, за 1 час).

Политика отмены: Возможность настройки правил (например, бесплатная отмена за 24 часа).

### 1.4. Персональные тренировочные планы (Personal Training Plans)
Назначение: Основная услуга, ради которой пользователи ищут тренера.

Функции:

Система запросов: Пользователь отправляет официальный запрос тренеру, указывая цели, сроки, бюджет, ограничения.

Конструктор планов: Визуальный инструмент для тренера с библиотекой упражнений (с видео и описанием техники).

Структура плана: Возможность создать программу на неделю/месяц с расписанием, подходами, повторениями, отдыхом, RPE (оценка воспринимаемой нагрузки).

Прикрепление материалов: Добавление видеоинструкций, заметок, рекомендаций по питанию.

Назначение плана клиенту: Готовый план появляется в разделе "Мои планы" у пользователя.

### 1.5. Обратная связь и отчетность (Feedback & Reporting)
Назначение: Контроль за выполнением плана и корректировка программ.

Функции:

Система отправки отчетов: Клиент прикрепляет к выполненной тренировке фото, видео, текстовые заметки ("что болело", "какие ощущения").

Лента активности клиента: Тренер в своем интерфейсе видит ход выполнения плана, завершенные тренировки и присланные отчеты.

Инструменты для обратной связи: Тренер может оставлять текстовые и голосовые комментарии, рисовать пометки на видео клиента для коррекции техники.

Чат с клиентом: Персональный защифрованный канал для обсуждения прогресса и вопросов.

### 1.6. Проведение онлайн-тренировок (Live Online Coaching)
Назначение: Проведение занятий в реальном времени для индивидуальных клиентов и групп.

Функции:

Создание виртуальной "комнаты": Автоматическое создание конференции (через интеграцию с Zoom, Whereby или кастомное WebRTC-решение) в назначенное время.

Доступ для клиентов: Участники, записавшиеся на занятие, получают ссылку для входа.

Встроенный чат и аудиосвязь: Для общения во время тренировки.

Запись сессии: Возможность записи тренировки для ее последующего просмотра клиентами.

Автоматическое сохранение результата: Факт проведения онлайн-тренировки фиксируется в истории занятий клиента.

### 1.7. Управление клиентской базой (Client Management - CRM)
Назначение: Помочь тренеру систематизировать работу с клиентами.

Функции:

База клиентов: Список всех текущих и прошлых клиентов.

История взаимодействий: Все тренировки, планы, сообщения и платежи по каждому клиенту в одном месте.

Заметки тренера: Приватные заметки о клиенте ("боится приседаний", "цель - марафон через 6 мес.").

Напоминания: Оповещения тренера о необходимости продлить план или провести check-in с клиентом.

### Ключевые сущности (Entities)
Coach (Тренер): Расширенная сущность User. Содержит ссылку на VerificationRequest, рейтинг, специализацию, описание услуг.

VerificationRequest (Заявка на верификацию): Статус, attached документы, комментарий модератора.

TrainingSlot (Слот для тренировки): Время, продолжительность, формат, цена, статус (свободен/занят).

Booking (Бронирование): Связывает User (клиента), Coach и TrainingSlot. Содержит статус оплаты.

TrainingPlan (План тренировок): Создан тренером, назначен на пользователя. Содержит массив WorkoutPlan.

CoachClientRelationship (Связь тренер-клиент): Устанавливается после первого бронирования или назначения плана. Нужна для разграничения доступа к данным.



 
