| риск | последствия | способы минимизации|
|---|---|---|
| Высокая сложность микросервисной архитектуры | Трудности в отладке, отслеживании запросов, требует высокой квалификации команды DevOps. Увеличивается время новых разработчиков.| Внедрение строгих стандартов логирования (например, сквозные ID запросов). Полная автоматизация развертывания.|
|Централизованные точки отказа | падение API шлюза или брокера сообщений парализует работу всего приложения | Тщательное проектирование отказоустойчивости этих компонентов (автоматическое восстановление). Регулярные нагрузочные тесты  для проверки устойчивости. |
| Цена и контроль затрат | Неоптимизированное использование ресурсов, особенно в автоматичском масштабировании сервисов и при работе с внешними API, может привести к неожиданно высоким счетам. | Использование резервированных инстансов для стабильной нагрузки. Настройка бюджетов и оповещений. Внедрение автоматического скейлинга не только на основе CPU, но и кастомных метрик (например, количества сообщений в очереди).|
|Управление конфигурацией и секретами| Хранение секретов (API-ключи, пароли БД) в коде или небезопасных хранилищах приводит к утечкам. | Использование специализированных сервисов для хранения секретов. Выдача секретов приложениям на лету |
| Уязвимость API Gateway и микросервисов| API Gateway — главная точка входа. Уязвимость в нем или в любом из микросервисов (например, инъекция, неправильная проверка прав) может привести к утечке данных. | Строгая валидация всех входящих данных. Регулярный security-аудит кода и зависимостей на уязвимость распространенных атак (OWASP Top 10). |
|Излишне широкие роли |	Если сервис получает права доступа не только к своим, но и к чужим ресурсам, его компрометация приведет к эскалации привилегий. |	Следование принципу минимальных привилегий. Создание отдельных ролей для каждого типа сервиса.|
|Защита данных  |Приложение хранит огромное количество персональных данных : здоровье, местоположение, инвентарь. Их утечка — катастрофа. |	Шифрование данных на лету TLS. Маскирование данных в логах. Строгое разграничение доступа к БД на уровне сетевых политик и учетных записей. Регулярный аукт доступа. |
| Риск каскадного отказа. | Падение одного критически важного сервиса (например, Авторизация) приводит к резкому росту ошибок и нагрузки на другие сервисы, которые от него зависят. |	Настройка корректных таймаутов и retry-политик между сервисами. Использование circuit breaker'ов для разрыва неработающих соединений и быстрого возврата ошибки, а не ожидания.|
|Сложность распределенных транзакций |	Действия пользователя затрагивают несколько сервисов. Гарантировать атомарность (все или ничего) очень сложно. | Отказ от распределенных транзакций в пользу Saga-паттерна. Использование брокера сообщений для координации шагов через события. Компенсирующие транзакции на случай ошибк.|
|Несогласованность данных между сервисами |	Данные дублируются между сервисами. Возможна временная несогласованность. |	Проектирование системы с учетом согласованности в конечном счете. Четкое определение границ консистентности для разных сценариев. Использование хореографии на событиях для синхронизации данных. |

### Общие рекомендации по снижению рисков.

* Все компоненты должны быть описаны в коде для воспроизводимости и контроля версий.
* Внедрить комплексный мониторинг всех слоев.
* Проводить регулярное тестирование и аудиты безопасности, начиная с этапа проектирования.
* Иметь хорошо документированные и отрепетированные планы на случай инцидентов и аварийного восстановления.